local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui

local scrollingFrame = Instance.new("ScrollingFrame")
scrollingFrame.Size = UDim2.new(1, 0, 0, 70)  
scrollingFrame.Position = UDim2.new(0, 0, 1, -70)  
scrollingFrame.BackgroundColor3 = Color3.new(0, 0, 0)
scrollingFrame.BackgroundTransparency = 0.5  
scrollingFrame.ScrollBarThickness = 8
scrollingFrame.CanvasSize = UDim2.new(0, 0, 1, 0)
scrollingFrame.Parent = screenGui

local uiListLayout = Instance.new("UIListLayout")
uiListLayout.FillDirection = Enum.FillDirection.Horizontal
uiListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
uiListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
uiListLayout.Padding = UDim.new(0, 5)  
uiListLayout.Parent = scrollingFrame

local function createToolButton(toolName)
    local button = Instance.new("ImageButton")
    button.Size = UDim2.new(0, 50, 0, 50)  
    button.BackgroundColor3 = Color3.new(1, 1, 1)
    button.BackgroundTransparency = 0.5  
    button.BorderSizePixel = 0
    button.Name = toolName
    button.Parent = scrollingFrame

    local toolLabel = Instance.new("TextLabel")
    toolLabel.Text = toolName
    toolLabel.Size = UDim2.new(1, 0, 1, 0)  
    toolLabel.BackgroundTransparency = 1  
    toolLabel.TextColor3 = Color3.new(1, 1, 1)  
    toolLabel.TextScaled = true  
    toolLabel.Parent = button

    button.MouseButton1Click:Connect(function()
        local characterTool = player.Character:FindFirstChild(toolName)
        if characterTool then
            characterTool.Parent = player.Backpack  
        else
            local tool = player.Backpack:FindFirstChild(toolName)
            if tool then
                tool.Parent = player.Character  
            end
        end
    end)
end

for _, tool in pairs(player.Backpack:GetChildren()) do
    if tool:IsA("Tool") then
        createToolButton(tool.Name)
    end
end

player.Backpack.ChildAdded:Connect(function(tool)
    if tool:IsA("Tool") then
        createToolButton(tool.Name)
    end
end)

local function updateCanvasSize()
    scrollingFrame.CanvasSize = UDim2.new(0, uiListLayout.AbsoluteContentSize.X, 0, 0)
end

uiListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateCanvasSize)
updateCanvasSize()
